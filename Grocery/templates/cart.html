{% extends 'index.html' %}
{% load static %}
{% block front %}
{% endblock %}
{% block category %}
{% endblock %}
{% block product %}
{% endblock %}
{% block featured %}
{% endblock %}
{% block popular %}
{% endblock %}
{% block blog %}
{% endblock %}
{% block login %}
{% load cart %}
<html>
    <head>
        <title>
            Organic - Grocery Store Website Login
        </title>
    </head>
    <body >
        <div class="container">
            <div class="border rounded p-4 m-4">
              
              {% if request.session.cart|length > 0 %}              
                <p class="display-4 pl-4 ml-4"> Your Cart </p>
                <hr>
                
              <table class="table text-center">
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in product %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td><img src="{{media_url}}{{product.image}}" class="rounded-4" height="60" width="60"></td>
                        <td>{{ product.subcategoryname }}</td>
                        <td>{{ product.price|currency }}</td>
                        <td>{{ product|cart_quantity:request.session.cart }}</td>
                        <td>{{ product|price_total:request.session.cart|currency }}</td>           
                    </tr>
                    {% endfor %}
                </tbody>

                <tfoot>
                    <tr>
                        <th colspan="4"></th>
                        <th colspan="1">Total</th>
                        <th>{{ product|total_cart_price:request.session.cart|currency }}</th>
                    </tr>
                </tfoot>
              </table> 
              <div class="m-3 p-3">
                <a href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvascart" class="btn btn-outline-success border 
                rounded col-lg-3 fw-semibold" style="margin-left: 850px;">Check Out</a>
              </div>  
              {% else %}
                <p class="display-4 pl-4 ml-4" style="text-align: center;"> Your Cart Is Empty</p>
                <hr>
                <div class="fw-semibold" style="text-align: center;">
                  <span>Not Sure Where To Start?<br>
                  Try These Collections:</span>
                </div>
                <div class="m-3 p-3">
                <a href="/" class="btn btn-outline-success border rounded col-lg-3 fw-semibold  px-2 py-2" style="margin-left: 430px; font-size: 20px;">
                  Continue Shopping :</a>
                </div>
                
              {% endif %}      
            </div>
        </div>
        


        
<!-- Modal -->
<div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvascart">
      <div class="offcanvas-header justify-content-center">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div class="order-md-last">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-sbtn-success">Check Out Form </span>
            <span class="badge bg-sbtn-success rounded-pill">3</span>
          </h4>
          <hr>
          <div class="m-3 p-1"></div>
          <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="" class="fw-semibold" style="font-size: 20px;">Address</label>
                <input type="text" name="address" id=""
                class="form-control" style="font-size: 18px;" placeholder="Enter Your Address:" required>
            </div>
            <div class="form-group">
                <label for="" class="fw-semibold" style="font-size: 20px;">Phone</label>
                <input type="text" name="phone" id=""
                class="form-control" style="font-size: 18px;" placeholder="Enter Your Phone Number:" required>
            </div>
            <div class="form-group">
                <label for="" class="fw-semibold" style="font-size: 20px;">City</label>
                <input type="text" name="city" id=""
                class="form-control" style="font-size: 18px;" placeholder="Enter Your City:" required>
            </div>
            <div class="form-group">
                <label for="" class="fw-semibold" style="font-size: 20px;">Pincode</label>
                <input type="text" name="pincode" id=""
                class="form-control mb-3" style="font-size: 18px;" placeholder="Enter Your PinCode:" required>
            </div>            
            </div>
       <a href="payment/"><button class="w-100 btn btn-success btn-lg" type="submit">Go to Payment</button></a>
          </form>
        </div>
      </div>
    </div>

</body>
</html>
{% endblock %}